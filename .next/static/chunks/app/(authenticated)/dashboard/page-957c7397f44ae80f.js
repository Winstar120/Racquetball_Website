(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4172],{63:(e,t,r)=>{"use strict";var n=r(7260);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},504:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5155),o=r(6489),i=r(63),l=r(2115),s=r(2619),a=r.n(s);function d(){var e,t,r,s,d,c,m,h,u,f,g;let{data:x,status:p}=(0,o.useSession)(),[y,b]=(0,l.useState)(null),[j,v]=(0,l.useState)(!0);async function S(){try{let e=await fetch("/api/stats");if(e.ok){let t=await e.json();b(t)}}catch(e){console.error("Error fetching stats:",e)}finally{v(!1)}}return((0,l.useEffect)(()=>{"unauthenticated"===p?(0,i.redirect)("/login"):"authenticated"===p&&S()},[p]),"loading"===p)?(0,n.jsx)("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."}):x?(0,n.jsx)("div",{style:{minHeight:"calc(100vh - 64px)"},children:(0,n.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Dashboard"}),(0,n.jsxs)("p",{style:{marginTop:"0.5rem",color:"#d1d5db"},children:["Welcome back, ",null==(e=x.user)?void 0:e.name,"!"]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",borderRadius:"0",overflow:"hidden"},children:[(0,n.jsx)("div",{style:{padding:"1.25rem"},children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("dt",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"Match Record"}),(0,n.jsx)("dd",{style:{marginTop:"0.25rem",fontSize:"2rem",fontWeight:"600",color:"#111827"},children:j?"...":"".concat((null==y||null==(t=y.stats)?void 0:t.wins)||0,"-").concat((null==y||null==(r=y.stats)?void 0:r.losses)||0)}),(null==y||null==(s=y.stats)?void 0:s.winRate)&&(0,n.jsxs)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:[y.stats.winRate,"% win rate"]})]})})}),(0,n.jsx)("div",{style:{backgroundColor:"#f9fafb",padding:"0.75rem 1.25rem",borderTop:"1px solid #e5e7eb"},children:(0,n.jsx)(a(),{href:"/matches?filter=past",style:{fontSize:"0.875rem",color:"#1f2937",textDecoration:"none",fontWeight:"500"},children:"View match history →"})})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",borderRadius:"0",overflow:"hidden"},children:[(0,n.jsx)("div",{style:{padding:"1.25rem"},children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("dt",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"Total Points"}),(0,n.jsx)("dd",{style:{marginTop:"0.25rem",fontSize:"2rem",fontWeight:"600",color:"#111827"},children:j?"...":(null==y||null==(d=y.stats)?void 0:d.totalPointsScored)||0}),(null==y||null==(c=y.stats)?void 0:c.avgPointsPerGame)&&(0,n.jsxs)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:[y.stats.avgPointsPerGame," per game"]})]})})}),(0,n.jsx)("div",{style:{backgroundColor:"#f9fafb",padding:"0.75rem 1.25rem",borderTop:"1px solid #e5e7eb"},children:(0,n.jsx)(a(),{href:"/standings",style:{fontSize:"0.875rem",color:"#1f2937",textDecoration:"none",fontWeight:"500"},children:"View standings →"})})]}),(0,n.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",borderRadius:"0",overflow:"hidden"},children:[(0,n.jsx)("div",{style:{padding:"1.25rem"},children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("dt",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280"},children:"Game Record"}),(0,n.jsx)("dd",{style:{marginTop:"0.25rem",fontSize:"2rem",fontWeight:"600",color:"#111827"},children:j?"...":"".concat((null==y||null==(m=y.stats)?void 0:m.totalGamesWon)||0,"-").concat(((null==y||null==(h=y.stats)?void 0:h.totalGamesPlayed)||0)-((null==y||null==(u=y.stats)?void 0:u.totalGamesWon)||0))}),(null==y||null==(f=y.stats)?void 0:f.gameWinRate)&&(0,n.jsxs)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:[y.stats.gameWinRate,"% win rate"]})]})})}),(0,n.jsx)("div",{style:{backgroundColor:"#f9fafb",padding:"0.75rem 1.25rem",borderTop:"1px solid #e5e7eb"},children:(0,n.jsx)(a(),{href:"/profile",style:{fontSize:"0.875rem",color:"#1f2937",textDecoration:"none",fontWeight:"500"},children:"Update profile →"})})]})]}),(0,n.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"white",marginBottom:"1rem",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Quick Actions"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[(0,n.jsx)("a",{href:"/leagues",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#1f2937",border:"1px solid #1f2937",textDecoration:"none",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#111827"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#1f2937"},children:"View Leagues"}),(0,n.jsx)("a",{href:"/matches?filter=upcoming",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#059669",border:"1px solid #059669",textDecoration:"none",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#047857"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#059669"},children:"Record Score"}),(0,n.jsx)("a",{href:"/matches",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f9fafb"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white"},children:"View Schedule"}),(0,n.jsx)("a",{href:"/profile",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f9fafb"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white"},children:"Edit Profile"}),(null==x||null==(g=x.user)?void 0:g.isAdmin)&&(0,n.jsx)("a",{href:"/admin",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#7c3aed",border:"1px solid #7c3aed",textDecoration:"none",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#6d28d9"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#7c3aed"},children:"Admin Panel"})]})]}),(null==y?void 0:y.upcomingMatches)&&y.upcomingMatches.length>0&&(0,n.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"white",marginBottom:"1rem",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Upcoming Matches"}),(0,n.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1rem"},children:[y.upcomingMatches.slice(0,3).map(e=>{var t;let r=new Date(e.scheduledTime),o=e.player1Id===(null==x||null==(t=x.user)?void 0:t.id)?e.player2.name:e.player1.name;return(0,n.jsxs)("div",{style:{padding:"0.75rem",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{style:{fontWeight:"500",color:"#111827"},children:["vs ",o]}),(0,n.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:e.league.name})]}),(0,n.jsxs)("div",{style:{textAlign:"right"},children:[(0,n.jsx)("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,n.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})]},e.id)}),(0,n.jsx)("div",{style:{marginTop:"1rem",textAlign:"center"},children:(0,n.jsx)(a(),{href:"/matches?filter=upcoming",style:{fontSize:"0.875rem",color:"#1f2937",textDecoration:"none",fontWeight:"500"},children:"View all upcoming matches →"})})]})]})]})}):null}},4881:(e,t,r)=>{Promise.resolve().then(r.bind(r,504))}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=4881)),_N_E=e.O()}]);