(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{2668:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),l=a(2619),i=a.n(l);let d=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],n=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"];function o(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)(!1);async function x(){try{let e=await fetch("/api/admin/courts");if(!e.ok)throw Error("Failed to fetch courts");let a=await e.json();t(a.courts||[])}catch(e){c("Failed to load courts")}finally{l(!1)}}async function b(e){var t,a;e.preventDefault();let s=new FormData(e.currentTarget),r=null==(t=s.get("name"))?void 0:t.trim(),l=s.get("number"),i=null==(a=s.get("location"))?void 0:a.trim(),d="string"==typeof l&&""!==l.trim()?Number.parseInt(l,10):NaN;if(!r)return void c("Court name is required");if(Number.isNaN(d)||d<1)return void c("Court number must be a positive integer");try{if(c(""),!(await fetch("/api/admin/courts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,number:d,location:i})})).ok)throw Error("Failed to add court");await x(),u(!1),e.target.reset()}catch(e){c("Failed to add court")}}async function h(e,t){t.preventDefault();let a=new FormData(t.currentTarget);try{if(!(await fetch("/api/admin/courts/".concat(e,"/availability"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dayOfWeek:parseInt(a.get("dayOfWeek")),startTime:a.get("startTime"),endTime:a.get("endTime")})})).ok)throw Error("Failed to add availability");await x(),t.target.reset()}catch(e){c("Failed to add availability")}}async function y(e,t){if(confirm("Are you sure you want to delete this time slot?"))try{if(!(await fetch("/api/admin/courts/".concat(e,"/availability/").concat(t),{method:"DELETE"})).ok)throw Error("Failed to delete availability");await x()}catch(e){c("Failed to delete availability")}}return(0,r.useEffect)(()=>{x()},[]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"py-6 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,s.jsxs)("ol",{className:"flex items-center",children:[(0,s.jsx)("li",{children:(0,s.jsxs)(i(),{href:"/admin",className:"text-gray-500 hover:text-gray-700",children:["Admin",(0,s.jsx)("span",{className:"mx-2 text-gray-400",children:"/"})]})}),(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-gray-900 font-medium",children:"Courts"})})]})}),(0,s.jsx)("h1",{className:"mt-2 text-2xl font-bold text-gray-900",children:"Court Management"})]}),(0,s.jsx)("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Add Court"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o&&(0,s.jsx)("div",{className:"mb-4 rounded-md bg-red-50 p-4 text-red-800",children:o}),m&&(0,s.jsxs)("div",{className:"mb-6 bg-white shadow rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Add New Court"}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Court Name"}),(0,s.jsx)("input",{type:"text",name:"name",id:"name",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Court 1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"number",className:"block text-sm font-medium text-gray-700",children:"Court Number"}),(0,s.jsx)("input",{type:"number",name:"number",id:"number",min:1,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,s.jsx)("input",{type:"text",name:"location",id:"location",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Main Building"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Add Court"})]})]})]}),a?(0,s.jsx)("div",{className:"text-center py-8",children:"Loading courts..."}):0===e.length?(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No courts have been added yet."}),(0,s.jsx)("button",{onClick:()=>u(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Add Your First Court"})]}):(0,s.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Court ",e.number,": ",e.name]}),e.location&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.location})]}),(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isActive?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Weekly Availability"}),0===e.availability.length?(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"No availability set"}):(0,s.jsx)("div",{className:"mb-3 space-y-2",children:e.availability.map(t=>{var a;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{children:[null==(a=d.find(e=>e.value===t.dayOfWeek))?void 0:a.label,": ",t.startTime," - ",t.endTime]}),(0,s.jsx)("button",{onClick:()=>y(e.id,t.id),className:"text-red-600 hover:text-red-900",children:"Remove"})]},t.id)})}),(0,s.jsxs)("form",{onSubmit:t=>h(e.id,t),className:"flex gap-2 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"day-".concat(e.id),className:"block text-xs font-medium text-gray-700",children:"Day"}),(0,s.jsx)("select",{name:"dayOfWeek",id:"day-".concat(e.id),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:d.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"start-".concat(e.id),className:"block text-xs font-medium text-gray-700",children:"Start Time"}),(0,s.jsx)("select",{name:"startTime",id:"start-".concat(e.id),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:n.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"end-".concat(e.id),className:"block text-xs font-medium text-gray-700",children:"End Time"}),(0,s.jsx)("select",{name:"endTime",id:"end-".concat(e.id),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:n.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("button",{type:"submit",className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Add Time Slot"})]})]})]},e.id))})]})]})}},4801:(e,t,a)=>{Promise.resolve().then(a.bind(a,2668))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=4801)),_N_E=e.O()}]);