(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4004],{226:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(5155),i=t(2115);function o(e){let{title:r,subtitle:t,children:i,headerAction:o}=e;return(0,n.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[(0,n.jsxs)("div",{style:{marginBottom:"2rem",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",fontFamily:"var(--font-playfair), Georgia, serif"},children:r}),t&&(0,n.jsx)("p",{style:{marginTop:"0.5rem",color:"#d1d5db",fontSize:"0.875rem"},children:t})]}),o&&(0,n.jsx)("div",{children:o})]}),(0,n.jsx)("div",{children:i})]})}function l(){let[e,r]=(0,i.useState)([]),[t,l]=(0,i.useState)([]),[s,d]=(0,i.useState)(!0),[a,c]=(0,i.useState)(""),[m,h]=(0,i.useState)("all"),[g,f]=(0,i.useState)(null),[u,x]=(0,i.useState)(!1);async function p(){try{let e=await fetch("/api/admin/users");if(!e.ok)throw Error("Failed to fetch users");let t=await e.json();r(t.users||[]),l(t.users||[])}catch(e){console.error("Error fetching users:",e)}finally{d(!1)}}async function y(e,r){if(confirm("Are you sure you want to ".concat(r?"remove":"grant"," admin privileges?")))try{if(!(await fetch("/api/admin/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,updates:{isAdmin:!r}})})).ok)throw Error("Failed to update user");await p()}catch(e){alert("Failed to update user role")}}async function b(e,r){if(confirm("Are you sure you want to delete ".concat(r,"? This action cannot be undone.")))try{if(!(await fetch("/api/admin/users?userId=".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete user");await p()}catch(e){alert("Failed to delete user")}}function j(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}return(0,i.useEffect)(()=>{p()},[]),(0,i.useEffect)(()=>{let r;r=e,a&&(r=r.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase()))),"all"!==m&&(r=r.filter(e=>"admin"===m?e.isAdmin:!e.isAdmin)),l(r)},[e,a,m]),(0,n.jsx)(o,{title:"Manage Users",subtitle:"".concat(e.length," total users • ").concat(e.filter(e=>e.isAdmin).length," admins"),children:s?(0,n.jsx)("div",{style:{backgroundColor:"white",padding:"2rem",textAlign:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:"Loading users..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{marginBottom:"1.5rem",display:"flex",gap:"1rem",flexWrap:"wrap"},children:[(0,n.jsx)("input",{type:"text",placeholder:"Search users...",value:a,onChange:e=>c(e.target.value),style:{padding:"0.75rem 1rem",fontSize:"0.875rem",border:"1px solid #d1d5db",backgroundColor:"white",color:"#111827",borderRadius:"0",minWidth:"250px",flex:"1"}}),(0,n.jsxs)("select",{value:m,onChange:e=>h(e.target.value),style:{padding:"0.75rem 1rem",fontSize:"0.875rem",border:"1px solid #d1d5db",backgroundColor:"white",color:"#111827",borderRadius:"0",minWidth:"150px"},children:[(0,n.jsx)("option",{value:"all",children:"All Users"}),(0,n.jsx)("option",{value:"admin",children:"Admins Only"}),(0,n.jsx)("option",{value:"user",children:"Regular Users"})]})]}),(0,n.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:"0",overflow:"hidden"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f9fafb"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Name"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Email"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Role"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Leagues"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Matches"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Joined"}),(0,n.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"right",fontSize:"0.75rem",fontWeight:"500",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Actions"})]})}),(0,n.jsx)("tbody",{style:{backgroundColor:"white"},children:0===t.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,style:{padding:"2rem 1.5rem",textAlign:"center",color:"#6b7280"},children:"No users found"})}):t.map(e=>(0,n.jsxs)("tr",{style:{borderTop:"1px solid #e5e7eb",transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f9fafb",onMouseLeave:e=>e.currentTarget.style.backgroundColor="white",children:[(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:"500",color:"#111827"},children:e.name}),e.skillLevel&&(0,n.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.125rem"},children:["Skill: ",e.skillLevel]})]})}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:e.email}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem"},children:e.isAdmin?(0,n.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"0.125rem 0.625rem",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#fef3c7",color:"#92400e",borderRadius:"0.25rem"},children:"Admin"}):(0,n.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"0.125rem 0.625rem",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"#e5e7eb",color:"#374151",borderRadius:"0.25rem"},children:"User"})}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:e.activeLeagues}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:e.totalMatches}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:j(e.createdAt)}),(0,n.jsx)("td",{style:{padding:"1rem 1.5rem",textAlign:"right"},children:(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,n.jsx)("button",{onClick:()=>{f(e),x(!0)},style:{padding:"0.25rem 0.75rem",fontSize:"0.875rem",color:"#2563eb",backgroundColor:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:"View"}),(0,n.jsx)("button",{onClick:()=>y(e.id,e.isAdmin),style:{padding:"0.25rem 0.75rem",fontSize:"0.875rem",color:"#d97706",backgroundColor:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:e.isAdmin?"Remove Admin":"Make Admin"}),(0,n.jsx)("button",{onClick:()=>b(e.id,e.name),style:{padding:"0.25rem 0.75rem",fontSize:"0.875rem",color:"#dc2626",backgroundColor:"transparent",border:"none",cursor:"pointer",textDecoration:"underline"},children:"Delete"})]})})]},e.id))})]})}),u&&g&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",maxWidth:"32rem",width:"90%",maxHeight:"80vh",overflow:"auto",padding:"1.5rem"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827"},children:"User Details"}),(0,n.jsx)("button",{onClick:()=>x(!1),style:{color:"#6b7280",fontSize:"1.5rem",background:"none",border:"none",cursor:"pointer"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",marginBottom:"0.5rem"},children:"Personal Information"}),(0,n.jsxs)("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Name:"})," ",g.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Email:"})," ",g.email]}),g.phone&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Phone:"})," ",g.phone]}),g.skillLevel&&(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Skill Level:"})," ",g.skillLevel]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Role:"})," ",g.isAdmin?"Administrator":"Regular User"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Member Since:"})," ",j(g.createdAt)]})]})]}),(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",marginBottom:"0.5rem"},children:"League Participation"}),(0,n.jsx)("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem"},children:0===g.leagues.length?(0,n.jsx)("p",{style:{color:"#6b7280"},children:"Not registered in any leagues"}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:g.leagues.map(e=>(0,n.jsxs)("div",{style:{paddingTop:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsx)("p",{style:{fontWeight:"500"},children:e.name}),(0,n.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:["Division: ",e.division," • Status: ",e.status]})]},e.id))})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#6b7280",marginBottom:"0.5rem"},children:"Statistics"}),(0,n.jsxs)("div",{style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"0.375rem"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Total Matches Played:"})," ",g.totalMatches]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Active Leagues:"})," ",g.activeLeagues]})]})]})]}),(0,n.jsx)("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("button",{onClick:()=>x(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#1f2937",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Close"})})]})})]})})}},3831:(e,r,t)=>{Promise.resolve().then(t.bind(t,226))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=3831)),_N_E=e.O()}]);