(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3823],{63:(e,r,t)=>{"use strict";var i=t(7260);t.o(i,"redirect")&&t.d(r,{redirect:function(){return i.redirect}}),t.o(i,"usePathname")&&t.d(r,{usePathname:function(){return i.usePathname}}),t.o(i,"useRouter")&&t.d(r,{useRouter:function(){return i.useRouter}}),t.o(i,"useSearchParams")&&t.d(r,{useSearchParams:function(){return i.useSearchParams}})},8875:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var i=t(5155),o=t(2115),n=t(6489),l=t(63),s=t(2619),d=t.n(s);function a(){var e;let{data:r,status:t}=(0,n.useSession)(),s=(0,l.useRouter)(),[a,c]=(0,o.useState)([]),[m,h]=(0,o.useState)(""),[u,g]=(0,o.useState)(!0),[f,x]=(0,o.useState)(null),[y,b]=(0,o.useState)(""),[p,j]=(0,o.useState)("");async function v(){try{var e,r;let t=await fetch("/api/admin/league-members",{credentials:"include",cache:"no-store"});if(!t.ok){let e=null!=(r=(await t.json().catch(()=>({}))).error)?r:"Request failed with status ".concat(t.status);throw Error(e)}let i=await t.json();c(i.leagues||[]),b(""),(null==(e=i.leagues)?void 0:e.length)>0&&!m&&h(i.leagues[0].id)}catch(e){console.error("Error fetching leagues:",e),b(e instanceof Error?e.message:"Failed to load league members")}finally{g(!1)}}async function w(e,r){if(confirm("Are you sure you want to remove ".concat(r," from this league?"))){x(e),b("");try{let t=await fetch("/api/admin/league-members/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to remove member")}b("Successfully removed ".concat(r," from the league")),await v()}catch(e){b("Error: ".concat(e.message))}finally{x(null)}}}(0,o.useEffect)(()=>{var e;if("loading"!==t){if(!(null==r||null==(e=r.user)?void 0:e.isAdmin))return void s.push("/dashboard");v()}},[t,null==r||null==(e=r.user)?void 0:e.isAdmin,s]);let S=a.find(e=>e.id===m),C=(null==S?void 0:S.registrations.filter(e=>{if(!p)return!0;let r=p.toLowerCase();return e.user.name.toLowerCase().includes(r)||e.user.email.toLowerCase().includes(r)||e.division.name.toLowerCase().includes(r)}))||[];return u?(0,i.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)("div",{style:{color:"white"},children:"Loading..."})}):(0,i.jsxs)("div",{style:{minHeight:"80vh"},children:[(0,i.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,i.jsx)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("nav",{style:{display:"flex"},children:(0,i.jsxs)("ol",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsxs)("li",{children:[(0,i.jsx)(d(),{href:"/admin",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Admin"}),(0,i.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,i.jsx)("li",{children:(0,i.jsx)("span",{style:{color:"#111827",fontWeight:"500",fontSize:"0.875rem"},children:"League Members"})})]})}),(0,i.jsx)("h1",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"League Members Management"})]})})})}),(0,i.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[y&&(0,i.jsx)("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:y.toLowerCase().startsWith("successfully")?"#d1fae5":"#fee2e2",border:"1px solid ".concat(y.toLowerCase().startsWith("successfully")?"#86efac":"#fecaca"),color:y.toLowerCase().startsWith("successfully")?"#065f46":"#991b1b",borderRadius:"0.375rem"},children:y}),0===a.length?(0,i.jsx)("div",{style:{backgroundColor:"white",padding:"2rem",textAlign:"center",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,i.jsx)("p",{style:{color:"#6b7280"},children:"No leagues found"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",marginBottom:"1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Select League"}),(0,i.jsx)("select",{value:m,onChange:e=>h(e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white"},children:a.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.name," (",e.registrations.length," members)"]},e.id))})]}),(0,i.jsxs)("div",{style:{flex:"1",minWidth:"200px"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Search Members"}),(0,i.jsx)("input",{type:"text",value:p,onChange:e=>j(e.target.value),placeholder:"Search by name, email, or division...",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]})]})}),S&&(0,i.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:[(0,i.jsxs)("div",{style:{padding:"1rem 1.5rem",backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsxs)("h2",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827"},children:[S.name," - Member List"]}),(0,i.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"0.25rem"},children:["Total: ",C.length," member(s)"]})]}),0===C.length?(0,i.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"#6b7280"},children:p?"No members found matching your search":"No members registered for this league"}):(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",fontSize:"0.875rem"},children:[(0,i.jsx)("thead",{style:{backgroundColor:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Email"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Phone"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Division"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Payment Status"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontWeight:"600",color:"#374151"},children:"Joined"}),(0,i.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"center",fontWeight:"600",color:"#374151"},children:"Actions"})]})}),(0,i.jsx)("tbody",{children:C.map((e,r)=>(0,i.jsxs)("tr",{style:{borderBottom:r<C.length-1?"1px solid #e5e7eb":"none"},children:[(0,i.jsx)("td",{style:{padding:"1rem 1.5rem",color:"#111827",fontWeight:"500"},children:e.user.name}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem",color:"#6b7280"},children:e.user.email}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem",color:"#6b7280"},children:e.user.phone||"-"}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem"},children:(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:e.division.name})}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem"},children:(0,i.jsx)("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"PAID"===e.paymentStatus?"#d1fae5":"#fef3c7",color:"PAID"===e.paymentStatus?"#065f46":"#92400e",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500"},children:e.paymentStatus})}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem",color:"#6b7280",fontSize:"0.875rem"},children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsx)("td",{style:{padding:"1rem 1.5rem",textAlign:"center"},children:(0,i.jsx)("button",{onClick:()=>w(e.id,e.user.name),disabled:f===e.id,style:{padding:"0.5rem 1rem",backgroundColor:f===e.id?"#9ca3af":"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.75rem",fontWeight:"500",cursor:f===e.id?"not-allowed":"pointer",transition:"background-color 0.2s"},onMouseOver:r=>{f!==e.id&&(r.currentTarget.style.backgroundColor="#dc2626")},onMouseOut:r=>{f!==e.id&&(r.currentTarget.style.backgroundColor="#ef4444")},children:f===e.id?"Removing...":"Remove"})})]},e.id))})]})})]})]})]})]})}},9192:(e,r,t)=>{Promise.resolve().then(t.bind(t,8875))}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=9192)),_N_E=e.O()}]);