(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9945],{63:(e,r,o)=>{"use strict";var t=o(7260);o.o(t,"redirect")&&o.d(r,{redirect:function(){return t.redirect}}),o.o(t,"usePathname")&&o.d(r,{usePathname:function(){return t.usePathname}}),o.o(t,"useRouter")&&o.d(r,{useRouter:function(){return t.useRouter}}),o.o(t,"useSearchParams")&&o.d(r,{useSearchParams:function(){return t.useSearchParams}})},2030:(e,r,o)=>{Promise.resolve().then(o.bind(o,6629))},6629:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>d});var t=o(5155),l=o(2115),i=o(6489),n=o(63),a=o(2619),s=o.n(a);function d(){var e,r,o,a;let{data:d,status:c}=(0,i.useSession)(),u=(0,n.useRouter)(),[m,f]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[p,b]=(0,l.useState)({name:"",email:"",phone:"",skillLevel:"C",emailNotifications:!0,smsNotifications:!1}),[x,y]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[S,C]=(0,l.useState)(null),[k,w]=(0,l.useState)(!0);async function z(){try{let o=await fetch("/api/profile");if(o.ok){var e,r;let t=await o.json();b({name:t.name||"",email:t.email||"",phone:t.phone||"",skillLevel:t.skillLevel||"C",emailNotifications:null==(e=t.emailNotifications)||e,smsNotifications:null!=(r=t.smsNotifications)&&r})}}catch(e){console.error("Error fetching profile:",e)}}async function T(){try{let e=await fetch("/api/stats");if(e.ok){let r=await e.json();C(r)}}catch(e){console.error("Error fetching stats:",e)}finally{w(!1)}}async function P(e){e.preventDefault(),g(!0),j(""),y("");try{let e=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(e.ok){let r=await e.json();y("Profile updated successfully!"),f(!1),d&&r.user.name!==d.user.name&&u.refresh()}else{let r=await e.json();j(r.error||"Failed to update profile")}}catch(e){j("An error occurred while updating your profile")}finally{g(!1)}}return((0,l.useEffect)(()=>{"unauthenticated"===c?u.push("/login"):(null==d?void 0:d.user)&&(z(),T())},[c,d,u]),"loading"===c)?(0,t.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("div",{style:{color:"white"},children:"Loading..."})}):(0,t.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)"},children:[(0,t.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,t.jsx)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("nav",{style:{display:"flex"},children:(0,t.jsxs)("ol",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(s(),{href:"/dashboard",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Dashboard"}),(0,t.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,t.jsx)("li",{children:(0,t.jsx)("span",{style:{color:"#111827",fontWeight:"500",fontSize:"0.875rem"},children:"Profile"})})]})}),(0,t.jsx)("h1",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"My Profile"})]}),!m&&(0,t.jsx)("button",{onClick:()=>f(!0),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#1f2937",border:"1px solid #1f2937",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#111827"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#1f2937"},children:"Edit Profile"})]})})}),(0,t.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[(0,t.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[x&&(0,t.jsx)("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#d1fae5",border:"1px solid #a7f3d0",borderRadius:"0.25rem",color:"#065f46"},children:x}),v&&(0,t.jsx)("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"0.25rem",color:"#991b1b"},children:v}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Full Name"}),(0,t.jsx)("input",{type:"text",value:p.name,onChange:e=>b({...p,name:e.target.value}),disabled:!m,style:{display:"block",width:"100%",padding:"0.5rem",fontSize:"0.875rem",color:"#111827",backgroundColor:m?"white":"#f9fafb",border:"1px solid #d1d5db",outline:"none",transition:"all 0.2s"},onFocus:e=>{m&&(e.target.style.borderColor="#111827",e.target.style.boxShadow="0 0 0 1px #111827")},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:p.email,onChange:e=>b({...p,email:e.target.value}),disabled:!m,style:{display:"block",width:"100%",padding:"0.5rem",fontSize:"0.875rem",color:"#111827",backgroundColor:m?"white":"#f9fafb",border:"1px solid #d1d5db",outline:"none",transition:"all 0.2s"},onFocus:e=>{m&&(e.target.style.borderColor="#111827",e.target.style.boxShadow="0 0 0 1px #111827")},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:p.phone,onChange:e=>b({...p,phone:e.target.value}),disabled:!m,placeholder:"(555) 123-4567",style:{display:"block",width:"100%",padding:"0.5rem",fontSize:"0.875rem",color:"#111827",backgroundColor:m?"white":"#f9fafb",border:"1px solid #d1d5db",outline:"none",transition:"all 0.2s"},onFocus:e=>{m&&(e.target.style.borderColor="#111827",e.target.style.boxShadow="0 0 0 1px #111827")},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Skill Level"}),(0,t.jsxs)("select",{value:p.skillLevel,onChange:e=>b({...p,skillLevel:e.target.value}),disabled:!m,style:{display:"block",width:"100%",padding:"0.5rem",fontSize:"0.875rem",color:"#111827",backgroundColor:m?"white":"#f9fafb",border:"1px solid #d1d5db",outline:"none",transition:"all 0.2s",cursor:m?"pointer":"default"},onFocus:e=>{m&&(e.target.style.borderColor="#111827",e.target.style.boxShadow="0 0 0 1px #111827")},onBlur:e=>{e.target.style.borderColor="#d1d5db",e.target.style.boxShadow="none"},children:[(0,t.jsx)("option",{value:"OPEN",children:"Open (Advanced)"}),(0,t.jsx)("option",{value:"A",children:"A (Strong Intermediate)"}),(0,t.jsx)("option",{value:"B",children:"B (Intermediate)"}),(0,t.jsx)("option",{value:"C",children:"C (Advanced Beginner)"}),(0,t.jsx)("option",{value:"D",children:"D (Beginner)"})]})]})]}),m&&(0,t.jsxs)("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,t.jsx)("button",{type:"button",onClick:()=>f(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f9fafb"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white"},children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:h,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:h?"#6b7280":"#1f2937",border:"1px solid #1f2937",cursor:h?"not-allowed":"pointer",transition:"all 0.2s"},onMouseOver:e=>{h||(e.currentTarget.style.backgroundColor="#111827")},onMouseOut:e=>{h||(e.currentTarget.style.backgroundColor="#1f2937")},children:h?"Saving...":"Save Changes"})]})]})]}),(0,t.jsxs)("div",{style:{marginTop:"2rem",backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem"},children:[(0,t.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",marginBottom:"1rem",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Account Statistics"}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,t.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"},children:[(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Games Played"}),(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"600",color:"#111827"},children:k?"...":(null==S||null==(e=S.stats)?void 0:e.totalGamesPlayed)||0})]}),(0,t.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"},children:[(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Game Win Rate"}),(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"600",color:"#111827"},children:k?"...":"".concat((null==S||null==(r=S.stats)?void 0:r.gameWinRate)||0,"%")})]}),(0,t.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"},children:[(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Total Points"}),(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"600",color:"#111827"},children:k?"...":(null==S||null==(o=S.stats)?void 0:o.totalPointsScored)||0})]}),(0,t.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"},children:[(0,t.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Active Leagues"}),(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"1.5rem",fontWeight:"600",color:"#111827"},children:k?"...":(null==S||null==(a=S.stats)?void 0:a.activeLeagues)||0})]})]})]})]})]})}}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=2030)),_N_E=e.O()}]);