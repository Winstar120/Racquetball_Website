(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2163],{63:(e,r,t)=>{"use strict";var o=t(7260);t.o(o,"redirect")&&t.d(r,{redirect:function(){return o.redirect}}),t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},2375:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var o=t(5155),n=t(2115),l=t(6489),a=t(63),i=t(2619),s=t.n(i);function d(e){var r,t,i;let{params:d}=e,{data:c}=(0,l.useSession)(),m=(0,a.useRouter)(),[u,h]=(0,n.useState)(null),[p,y]=(0,n.useState)(!0),[g,f]=(0,n.useState)(!1),[b,x]=(0,n.useState)(""),[j,C]=(0,n.useState)(""),[S,T]=(0,n.useState)(!1),[v,w]=(0,n.useState)([]),[k,W]=(0,n.useState)(!1);async function z(){try{let e=await fetch("/api/matches/".concat(j));if(!e.ok)throw Error("Failed to fetch match");let r=await e.json();h(r.match),r.match.games&&w(r.match.games.map(e=>({gameNumber:e.gameNumber,player1Score:e.player1Score,player2Score:e.player2Score,player3Score:e.player3Score})))}catch(e){x("Failed to load match details")}finally{y(!1)}}async function M(){f(!0),x("");try{let e=await fetch("/api/matches/".concat(j,"/confirm"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to confirm score")}m.push("/matches")}catch(e){x(e.message||"Failed to confirm score"),f(!1)}}function B(e,r,t){let o=Math.min(Math.max(0,""===t?0:parseInt(t)||0),(null==u?void 0:u.league.pointsToWin)||15),n=[...v];"player1"===r?n[e].player1Score=o:"player2"===r?n[e].player2Score=o:"player3"===r&&(n[e].player3Score=o),w(n)}async function E(){W(!0),x("");try{let e=await fetch("/api/matches/".concat(j,"/dispute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({games:v})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to submit dispute")}m.push("/matches")}catch(e){x(e.message||"Failed to submit dispute"),W(!1)}}if((0,n.useEffect)(()=>{d.then(e=>C(e.matchId))},[d]),(0,n.useEffect)(()=>{j&&z()},[j]),p)return(0,o.jsx)("div",{style:{minHeight:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)("p",{style:{color:"white",fontSize:"1.125rem"},children:"Loading match details..."})});if(!u)return(0,o.jsx)("div",{style:{minHeight:"calc(100vh - 64px)"},children:(0,o.jsx)("div",{style:{maxWidth:"48rem",margin:"0 auto",padding:"2rem 1rem"},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",padding:"1.75rem",color:"#b91c1c"},children:[(0,o.jsx)("p",{style:{fontWeight:600},children:"Match not found."}),(0,o.jsx)(s(),{href:"/matches",style:{display:"inline-block",marginTop:"1rem",color:"#1f2937",textDecoration:"none",border:"1px solid #d1d5db",padding:"0.5rem 1rem",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Back to Matches"})]})})});let D=null==c||null==(r=c.user)?void 0:r.id,F=u.player1.id===D,R=u.player2.id===D,I=(null==(t=u.player3)?void 0:t.id)===D,L=F&&u.player1Confirmed||R&&u.player2Confirmed||I&&u.player3Confirmed,P="CUTTHROAT"===u.league.gameType;return(0,o.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)"},children:[(0,o.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,o.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:[(0,o.jsx)("nav",{style:{display:"flex"},"aria-label":"Breadcrumb",children:(0,o.jsxs)("ol",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsxs)("li",{children:[(0,o.jsx)(s(),{href:"/dashboard",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Dashboard"}),(0,o.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,o.jsxs)("li",{children:[(0,o.jsx)(s(),{href:"/matches",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Matches"}),(0,o.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,o.jsx)("li",{children:(0,o.jsx)("span",{style:{color:"#111827",fontWeight:"500",fontSize:"0.875rem"},children:"Confirm Score"})})]})}),(0,o.jsx)("h1",{style:{marginTop:"0.75rem",fontSize:"1.75rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Confirm Match Score"}),(0,o.jsx)("p",{style:{marginTop:"0.25rem",color:"#6b7280",fontSize:"0.975rem"},children:"Review the reported scores and either confirm them or submit corrected values if there is an issue."})]})}),(0,o.jsx)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.75rem"},children:[b&&(0,o.jsx)("div",{style:{padding:"1rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b"},children:b}),F||R||I?L?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#047857"},children:[(0,o.jsx)("p",{style:{marginBottom:"1.5rem",fontSize:"1.05rem",fontWeight:600},children:"You have already confirmed this score."}),(0,o.jsx)(s(),{href:"/matches",style:{color:"#1f2937",textDecoration:"none",border:"1px solid #d1d5db",padding:"0.75rem 1.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",fontWeight:500},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Back to Matches"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",marginBottom:"1rem"},children:"Match Details"}),(0,o.jsxs)("dl",{style:{display:"grid",gap:"1.25rem",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",fontSize:"0.95rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"League"}),(0,o.jsx)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:u.league.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"Players"}),(0,o.jsxs)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:[u.player1.name," vs ",u.player2.name,u.player3&&" vs ".concat(u.player3.name)]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"Format"}),(0,o.jsxs)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:[u.league.gameType," \xb7 First to ",u.league.pointsToWin,u.league.winByTwo?", win by 2":""]})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#111827",marginBottom:"1rem"},children:"Reported Scores"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.games.map((e,r)=>(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center",padding:"1rem",backgroundColor:"#f9fafb",border:"1px solid #e5e7eb"},children:[(0,o.jsxs)("span",{style:{fontWeight:600,color:"#111827"},children:["Game ",r+1]}),(0,o.jsxs)("span",{style:{color:"#374151"},children:[u.player1.name,": ",(0,o.jsx)("strong",{children:e.player1Score})]}),(0,o.jsxs)("span",{style:{color:"#374151"},children:[u.player2.name,": ",(0,o.jsx)("strong",{children:e.player2Score})]}),P&&u.player3&&(0,o.jsxs)("span",{style:{color:"#374151"},children:[u.player3.name,": ",(0,o.jsx)("strong",{children:e.player3Score||0})]})]},r))}),u.scoreReportedBy&&(0,o.jsxs)("p",{style:{marginTop:"0.75rem",fontSize:"0.875rem",color:"#6b7280"},children:["Reported by:"," ",u.scoreReportedBy===u.player1.id?u.player1.name:u.scoreReportedBy===u.player2.id?u.player2.name:(null==(i=u.player3)?void 0:i.id)===u.scoreReportedBy?u.player3.name:"Unknown"]})]}),S?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1.5rem"},children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#111827",marginBottom:"0.75rem"},children:"Enter Correct Scores"}),(0,o.jsx)("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:"1rem"},children:"Provide the correct score for each game. Everyone involved in the match will be notified of the dispute."}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:v.map((e,r)=>(0,o.jsxs)("div",{style:{border:"1px solid #e5e7eb",padding:"1.5rem"},children:[(0,o.jsxs)("h4",{style:{fontWeight:600,color:"#111827",marginBottom:"1rem"},children:["Game ",r+1]}),(0,o.jsxs)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(".concat(P?3:2,", minmax(0, 1fr))")},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:u.player1.name}),(0,o.jsx)("input",{type:"number",min:"0",max:u.league.pointsToWin||15,value:void 0!==e.player1Score?e.player1Score:"",onChange:e=>B(r,"player1",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:u.player2.name}),(0,o.jsx)("input",{type:"number",min:"0",max:u.league.pointsToWin||15,value:void 0!==e.player2Score?e.player2Score:"",onChange:e=>B(r,"player2",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]}),P&&u.player3&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:u.player3.name}),(0,o.jsx)("input",{type:"number",min:"0",max:u.league.pointsToWin||15,value:void 0!==e.player3Score?e.player3Score:"",onChange:e=>B(r,"player3",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]})]})]},r))})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[(0,o.jsx)("button",{onClick:()=>T(!1),style:{padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:500,color:"#1f2937",backgroundColor:"white",border:"1px solid #d1d5db",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Back"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,o.jsx)(s(),{href:"/matches",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:500,color:"#1f2937",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Cancel"}),(0,o.jsx)("button",{onClick:E,disabled:k,style:{padding:"0.75rem 1.75rem",fontSize:"0.95rem",fontWeight:600,color:"white",backgroundColor:k?"#4b5563":"#dc2626",border:"1px solid "+(k?"#4b5563":"#dc2626"),cursor:k?"not-allowed":"pointer",opacity:k?.75:1,transition:"all 0.2s"},onMouseEnter:e=>{k||(e.currentTarget.style.backgroundColor="#b91c1c",e.currentTarget.style.borderColor="#b91c1c")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=k?"#4b5563":"#dc2626",e.currentTarget.style.borderColor=k?"#4b5563":"#dc2626"},children:k?"Submitting...":"Submit Dispute"})]})]})]}):(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[(0,o.jsx)("p",{style:{color:"#6b7280",fontSize:"0.9rem"},children:"By confirming, you acknowledge these scores are accurate to the best of your knowledge."}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,o.jsx)(s(),{href:"/matches",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:500,color:"#1f2937",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>T(!0),style:{padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:600,color:"white",backgroundColor:"#ca8a04",border:"1px solid #ca8a04",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#b45309",e.currentTarget.style.borderColor="#b45309"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#ca8a04",e.currentTarget.style.borderColor="#ca8a04"},children:"Dispute Score"}),(0,o.jsx)("button",{onClick:M,disabled:g,style:{padding:"0.75rem 1.75rem",fontSize:"0.95rem",fontWeight:600,color:"white",backgroundColor:g?"#4b5563":"#059669",border:"1px solid "+(g?"#4b5563":"#059669"),cursor:g?"not-allowed":"pointer",opacity:g?.75:1,transition:"all 0.2s"},onMouseEnter:e=>{g||(e.currentTarget.style.backgroundColor="#047857",e.currentTarget.style.borderColor="#047857")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=g?"#4b5563":"#059669",e.currentTarget.style.borderColor=g?"#4b5563":"#059669"},children:g?"Confirming...":"Confirm Score"})]})]})]}):(0,o.jsxs)("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"#6b7280"},children:[(0,o.jsx)("p",{style:{marginBottom:"1.5rem",fontSize:"1.05rem"},children:"You are not a participant in this match."}),(0,o.jsx)(s(),{href:"/matches",style:{color:"#1f2937",textDecoration:"none",border:"1px solid #d1d5db",padding:"0.75rem 1.5rem",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",fontWeight:500},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Back to Matches"})]})]})})]})}},3472:(e,r,t)=>{Promise.resolve().then(t.bind(t,2375))}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=3472)),_N_E=e.O()}]);