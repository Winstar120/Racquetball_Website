(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6971],{63:(e,r,t)=>{"use strict";var o=t(7260);t.o(o,"redirect")&&t.d(r,{redirect:function(){return o.redirect}}),t.o(o,"usePathname")&&t.d(r,{usePathname:function(){return o.usePathname}}),t.o(o,"useRouter")&&t.d(r,{useRouter:function(){return o.useRouter}}),t.o(o,"useSearchParams")&&t.d(r,{useSearchParams:function(){return o.useSearchParams}})},1174:(e,r,t)=>{Promise.resolve().then(t.bind(t,6027))},5016:(e,r,t)=>{"use strict";function o(e){switch(e){case"SINGLES":return"Singles";case"DOUBLES":return"Doubles";case"CUTTHROAT":return"Cut-Throat";default:return e}}t.d(r,{q:()=>o})},6027:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var o=t(5155),l=t(2115),a=t(6489),n=t(63),i=t(2619),s=t.n(i),c=t(5016);function d(e){let{params:r}=e,{data:t}=(0,a.useSession)(),i=(0,n.useRouter)(),[d,m]=(0,l.useState)(null),[p,y]=(0,l.useState)([{gameNumber:1,player1Score:0,player2Score:0},{gameNumber:2,player1Score:0,player2Score:0},{gameNumber:3,player1Score:0,player2Score:0}]),[u,h]=(0,l.useState)(!0),[g,f]=(0,l.useState)(!1),[x,b]=(0,l.useState)(""),[S,j]=(0,l.useState)("");async function T(){try{let e=await fetch("/api/matches/".concat(S));if(!e.ok)throw Error("Failed to fetch match");let r=await e.json();m(r.match),"CUTTHROAT"===r.match.league.gameType?y([{gameNumber:1,player1Score:0,player2Score:0,player3Score:0},{gameNumber:2,player1Score:0,player2Score:0,player3Score:0},{gameNumber:3,player1Score:0,player2Score:0,player3Score:0}]):y([{gameNumber:1,player1Score:0,player2Score:0},{gameNumber:2,player1Score:0,player2Score:0},{gameNumber:3,player1Score:0,player2Score:0}])}catch(e){b("Failed to load match details")}finally{h(!1)}}function v(e,r,t){let o=Math.min(Math.max(0,""===t?0:parseInt(t)||0),(null==d?void 0:d.league.pointsToWin)||15),l=[...p];"player1"===r?l[e].player1Score=o:"player2"===r?l[e].player2Score=o:"player3"===r&&(l[e].player3Score=o),y(l)}async function C(){var e;if(f(!0),b(""),!d){b("Match details not loaded yet."),f(!1);return}let r=null!=(e=d.league.pointsToWin)?e:11,t="CUTTHROAT"===d.league.gameType;for(let e=0;e<p.length;e++){let o=p[e];if([o.player1Score,o.player2Score,t?o.player3Score:void 0].filter(e=>"number"==typeof e).filter(e=>e===r).length>1){window.alert("Game ".concat(e+1,": Only one player can have ").concat(r," points.")),f(!1);return}}try{let e=await fetch("/api/matches/".concat(S,"/score"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({games:p})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to submit scores")}i.push("/matches")}catch(e){b(e.message||"Failed to submit scores")}finally{f(!1)}}if((0,l.useEffect)(()=>{r.then(e=>j(e.matchId))},[r]),(0,l.useEffect)(()=>{S&&T()},[S]),u||!d)return(0,o.jsx)("div",{style:{minHeight:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)("div",{style:{color:"white",fontSize:"1.125rem"},children:"Loading match details..."})});let w="CUTTHROAT"===d.league.gameType;return(0,o.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)"},children:[(0,o.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,o.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:[(0,o.jsx)("nav",{style:{display:"flex"},"aria-label":"Breadcrumb",children:(0,o.jsxs)("ol",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsxs)("li",{children:[(0,o.jsx)(s(),{href:"/matches",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Matches"}),(0,o.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,o.jsx)("li",{children:(0,o.jsx)("span",{style:{color:"#111827",fontWeight:"500",fontSize:"0.875rem"},children:"Report Score"})})]})}),(0,o.jsx)("h1",{style:{marginTop:"0.75rem",fontSize:"1.75rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Report Match Score"}),(0,o.jsx)("p",{style:{marginTop:"0.25rem",color:"#6b7280",fontSize:"0.975rem"},children:"Enter the results for each game below. Scores should reflect the final points earned by each player."})]})}),(0,o.jsx)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",padding:"2rem",display:"flex",flexDirection:"column",gap:"1.75rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#111827",marginBottom:"1rem"},children:"Match Details"}),(0,o.jsxs)("dl",{style:{display:"grid",gap:"1.25rem",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",fontSize:"0.95rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"League"}),(0,o.jsx)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:d.league.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"Game Type"}),(0,o.jsx)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:(0,c.q)(d.league.gameType)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"Players"}),(0,o.jsxs)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:[d.player1.name," vs ",d.player2.name,d.player3&&" vs ".concat(d.player3.name)]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("dt",{style:{color:"#6b7280",fontWeight:500},children:"Game Rules"}),(0,o.jsxs)("dd",{style:{color:"#111827",marginTop:"0.25rem"},children:["First to ",d.league.pointsToWin," points",d.league.winByTwo&&", win by 2"]})]})]})]}),x&&(0,o.jsx)("div",{style:{padding:"1rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b"},children:x}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#111827",marginBottom:"1rem"},children:"Game Scores"}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:p.map((e,r)=>(0,o.jsxs)("div",{style:{border:"1px solid #e5e7eb",padding:"1.5rem"},children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("h4",{style:{fontSize:"1rem",fontWeight:"600",color:"#111827"},children:["Game ",r+1]}),(0,o.jsxs)("p",{style:{marginTop:"0.25rem",fontSize:"0.875rem",color:"#6b7280"},children:["Record the points for each player. Only one player can reach ",d.league.pointsToWin," points."]})]}),(0,o.jsxs)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(".concat(w?3:2,", minmax(0, 1fr))")},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:d.player1.name}),(0,o.jsx)("input",{type:"number",min:"0",max:d.league.pointsToWin||15,value:void 0!==e.player1Score?e.player1Score:"",onChange:e=>v(r,"player1",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:d.player2.name}),(0,o.jsx)("input",{type:"number",min:"0",max:d.league.pointsToWin||15,value:void 0!==e.player2Score?e.player2Score:"",onChange:e=>v(r,"player2",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]}),w&&d.player3&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.9rem",fontWeight:500,color:"#374151",marginBottom:"0.5rem"},children:d.player3.name}),(0,o.jsx)("input",{type:"number",min:"0",max:d.league.pointsToWin||15,value:void 0!==e.player3Score?e.player3Score:"",onChange:e=>v(r,"player3",e.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #d1d5db",fontSize:"1rem",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#111827",e.currentTarget.style.boxShadow="0 0 0 1px #111827"},onBlur:e=>{e.currentTarget.style.borderColor="#d1d5db",e.currentTarget.style.boxShadow="none"}})]})]})]},r))})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[(0,o.jsxs)("div",{style:{padding:"0.75rem 1rem",backgroundColor:"#fef3c7",border:"1px solid #fde68a",color:"#92400e",fontSize:"0.85rem"},children:[(0,o.jsx)("strong",{children:"Reminder:"})," Opponents must confirm the reported scores before the match is finalized."]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,o.jsx)(s(),{href:"/matches",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"0.95rem",fontWeight:500,color:"#1f2937",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f3f4f6",e.currentTarget.style.borderColor="#9ca3af"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderColor="#d1d5db"},children:"Cancel"}),(0,o.jsx)("button",{onClick:C,disabled:g,style:{padding:"0.75rem 1.75rem",fontSize:"0.95rem",fontWeight:600,color:"white",backgroundColor:g?"#4b5563":"#1f2937",border:"1px solid #1f2937",cursor:g?"not-allowed":"pointer",opacity:g?.7:1,transition:"all 0.2s"},onMouseEnter:e=>{g||(e.currentTarget.style.backgroundColor="#111827")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=g?"#4b5563":"#1f2937"},children:g?"Saving...":"Submit Scores"})]})]})]})})]})}}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=1174)),_N_E=e.O()}]);