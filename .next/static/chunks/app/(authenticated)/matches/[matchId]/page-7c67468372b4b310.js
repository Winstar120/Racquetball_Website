(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4052],{63:(e,r,t)=>{"use strict";var l=t(7260);t.o(l,"redirect")&&t.d(r,{redirect:function(){return l.redirect}}),t.o(l,"usePathname")&&t.d(r,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(r,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(r,{useSearchParams:function(){return l.useSearchParams}})},2916:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var l=t(5155),n=t(2115),a=t(6489),i=t(63),o=t(2619),s=t.n(o);function c(e){var r;let{params:t}=e,{data:o}=(0,a.useSession)();(0,i.useRouter)();let[c,d]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0),[y,u]=(0,n.useState)(""),[p,g]=(0,n.useState)("");(0,n.useEffect)(()=>{t.then(e=>g(e.matchId))},[t]),(0,n.useEffect)(()=>{p&&f()},[p]);let f=async()=>{try{let e=await fetch("/api/matches/".concat(p));if(!e.ok)throw Error("Failed to fetch match");let r=await e.json();d(r.match)}catch(e){u("Failed to load match details")}finally{h(!1)}},x=e=>{switch(e){case"SCHEDULED":return"#3b82f6";case"IN_PROGRESS":return"#f59e0b";case"COMPLETED":return"#10b981";case"CANCELLED":return"#ef4444";default:return"#6b7280"}},S=()=>{var e,r;if(!o||!c)return!1;let t=o.user.id;return"SCHEDULED"===c.status&&(c.player1.id===t||c.player2.id===t||(null==(e=c.player3)?void 0:e.id)===t||(null==(r=c.player4)?void 0:r.id)===t)};if(m)return(0,l.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{style:{color:"white"},children:"Loading match details..."})});if(y||!c)return(0,l.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{style:{color:"white"},children:y||"Match not found"})});let j=(()=>{if(!c||0===c.games.length)return null;let e=0,r=0,t=0;if(c.games.forEach(l=>{let n=[{player:"player1",score:l.player1Score},{player:"player2",score:l.player2Score}];"CUTTHROAT"===c.league.gameType&&void 0!==l.player3Score&&n.push({player:"player3",score:l.player3Score});let a=n.reduce((e,r)=>r.score>e.score?r:e);"player1"===a.player?e++:"player2"===a.player?r++:"player3"===a.player&&t++}),"CUTTHROAT"===c.league.gameType){if(e>=2)return c.player1.name;if(r>=2)return c.player2.name;if(t>=2&&c.player3)return c.player3.name}else{if(e>=2)return c.player1.name;if(r>=2)return c.player2.name}return null})();return(0,l.jsx)("div",{style:{minHeight:"80vh"},children:(0,l.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsx)(s(),{href:"/matches",style:{color:"#9ca3af",textDecoration:"none",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",marginBottom:"1rem"},children:"← Back to Matches"}),(0,l.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",fontFamily:"var(--font-playfair), Georgia, serif",marginBottom:"0.5rem"},children:"Match Details"}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,l.jsx)("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"".concat(x(c.status),"20"),color:x(c.status),borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500"},children:(e=>{switch(e){case"SCHEDULED":return"Scheduled";case"IN_PROGRESS":return"In Progress";case"COMPLETED":return"Completed";case"CANCELLED":return"Cancelled";default:return e}})(c.status)}),(0,l.jsxs)("span",{style:{color:"#9ca3af",fontSize:"0.875rem"},children:[c.league.name," • Week ",c.weekNumber]})]})]}),(0,l.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,l.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#111827"},children:"Match Information"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Players"}),(0,l.jsxs)("div",{style:{fontSize:"1rem",color:"#111827",fontWeight:"500"},children:[c.player1.name," vs ",c.player2.name,c.player3&&(0,l.jsx)("span",{children:"CUTTHROAT"===c.league.gameType?" vs ".concat(c.player3.name):c.player4?" • ".concat(c.player3.name," & ").concat(c.player4.name):""})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Date & Time"}),(0,l.jsxs)("div",{style:{fontSize:"1rem",color:"#111827"},children:[new Date(c.scheduledTime).toLocaleDateString()," at"," ",new Date(c.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Court"}),(0,l.jsx)("div",{style:{fontSize:"1rem",color:"#111827"},children:(null==(r=c.court)?void 0:r.name)||"TBD"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Game Type"}),(0,l.jsx)("div",{style:{fontSize:"1rem",color:"#111827"},children:(e=>{switch(e){case"SINGLES":return"Singles";case"DOUBLES":return"Doubles";case"CUTTHROAT":return"Cut-Throat";default:return e}})(c.league.gameType)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Game Rules"}),(0,l.jsxs)("div",{style:{fontSize:"1rem",color:"#111827"},children:["First to ",c.league.pointsToWin," points",c.league.winByTwo&&", win by 2"]})]})]})]}),c.games.length>0&&(0,l.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,l.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"#111827"},children:"Game Scores"}),j&&(0,l.jsx)("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f0fdf4",borderRadius:"0.375rem",border:"1px solid #86efac"},children:(0,l.jsxs)("span",{style:{color:"#166534",fontWeight:"600"},children:["Winner: ",j]})}),(0,l.jsx)("div",{style:{overflowX:"auto"},children:(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb"},children:[(0,l.jsx)("th",{style:{padding:"0.75rem",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"#6b7280"},children:"Game"}),(0,l.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#6b7280"},children:c.player1.name}),(0,l.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#6b7280"},children:c.player2.name}),"CUTTHROAT"===c.league.gameType&&c.player3&&(0,l.jsx)("th",{style:{padding:"0.75rem",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"#6b7280"},children:c.player3.name})]})}),(0,l.jsx)("tbody",{children:c.games.map(e=>{let r="CUTTHROAT"===c.league.gameType?Math.max(e.player1Score,e.player2Score,e.player3Score||0):Math.max(e.player1Score,e.player2Score);return(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #e5e7eb"},children:[(0,l.jsxs)("td",{style:{padding:"0.75rem",fontWeight:"500"},children:["Game ",e.gameNumber]}),(0,l.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:e.player1Score===r?"600":"400",color:e.player1Score===r?"#059669":"#6b7280"},children:e.player1Score}),(0,l.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:e.player2Score===r?"600":"400",color:e.player2Score===r?"#059669":"#6b7280"},children:e.player2Score}),"CUTTHROAT"===c.league.gameType&&(0,l.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",fontWeight:e.player3Score===r?"600":"400",color:e.player3Score===r?"#059669":"#6b7280"},children:e.player3Score||0})]},e.id)})})]})})]}),S()&&(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"2rem"},children:(0,l.jsx)(s(),{href:"/matches/".concat(c.id,"/report"),style:{padding:"0.75rem 2rem",backgroundColor:"#3b82f6",color:"white",borderRadius:"0.375rem",textDecoration:"none",fontSize:"0.875rem",fontWeight:"500",display:"inline-block"},children:"Report Score"})}),"SCHEDULED"===c.status&&!S()&&(0,l.jsx)("div",{style:{textAlign:"center",marginTop:"2rem",color:"#9ca3af",fontSize:"0.875rem"},children:"Only match participants can report scores"})]})})}},7683:(e,r,t)=>{Promise.resolve().then(t.bind(t,2916))}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=7683)),_N_E=e.O()}]);