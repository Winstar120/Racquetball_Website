(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5157],{63:(e,r,t)=>{"use strict";var n=t(7260);t.o(n,"redirect")&&t.d(r,{redirect:function(){return n.redirect}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},1970:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var n=t(5155),l=t(2115),i=t(6489),o=t(63),a=t(2619),s=t.n(a),d=t(5016);function c(e){let{initialFilter:r}=e,{data:t,status:a}=(0,i.useSession)(),c=(0,o.useRouter)(),m=(0,o.useSearchParams)(),[h,u]=(0,l.useState)([]),[g,p]=(0,l.useState)(r),[f,x]=(0,l.useState)(!0),[y,b]=(0,l.useState)("");async function j(){try{let e=await fetch("/api/matches?filter=".concat(g));if(!e.ok)throw Error("Failed to fetch matches");let r=(await e.json()).matches||[];"past"===g&&r.sort((e,r)=>{let t=e.games&&e.games.length>0,n=r.games&&r.games.length>0;return t&&!n?-1:!t&&n?1:new Date(r.scheduledTime).getTime()-new Date(e.scheduledTime).getTime()}),u(r)}catch(e){b("Failed to load matches")}finally{x(!1)}}return((0,l.useEffect)(()=>{let e=m.get("filter");("past"===e||"upcoming"===e||"all"===e)&&p(e)},[m]),(0,l.useEffect)(()=>{"unauthenticated"===a?c.push("/login"):"authenticated"===a&&j()},[a,g]),"loading"===a||f)?(0,n.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("div",{style:{color:"white"},children:"Loading matches..."})}):(0,n.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)"},children:[(0,n.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,n.jsx)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:(0,n.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,n.jsxs)("div",{children:[(0,n.jsx)("nav",{style:{display:"flex"},children:(0,n.jsxs)("ol",{style:{display:"flex",alignItems:"center",listStyle:"none",padding:0,margin:0},children:[(0,n.jsxs)("li",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(s(),{href:"/dashboard",style:{color:"#6b7280",textDecoration:"none",fontSize:"0.875rem"},children:"Dashboard"}),(0,n.jsx)("span",{style:{margin:"0 0.5rem",color:"#9ca3af"},children:"/"})]}),(0,n.jsx)("li",{children:(0,n.jsx)("span",{style:{color:"#111827",fontWeight:500,fontSize:"0.875rem"},children:"Matches"})})]})}),(0,n.jsx)("h1",{style:{marginTop:"0.75rem",fontSize:"1.75rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"My Matches"})]})})})}),(0,n.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[y&&(0,n.jsx)("div",{style:{marginBottom:"1rem",borderRadius:"0.375rem",backgroundColor:"#fee2e2",padding:"1rem",color:"#991b1b"},children:y}),(0,n.jsx)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",flexWrap:"wrap"},children:["upcoming","past","all"].map(e=>(0,n.jsxs)("button",{onClick:()=>{p(e);let r=new URLSearchParams(m);r.set("filter",e),c.replace("/matches?".concat(r.toString()))},style:{padding:"0.5rem 1.25rem",border:"1px solid #d1d5db",backgroundColor:g===e?"#111827":"white",color:g===e?"white":"#111827",fontSize:"0.95rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s",borderRadius:0},children:["upcoming"===e&&"Upcoming Matches","past"===e&&"Past Matches","all"===e&&"All Matches"]},e))}),0===h.length?(0,n.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",padding:"2rem",textAlign:"center"},children:(0,n.jsx)("p",{style:{color:"#6b7280"},children:"No matches found for the selected filter."})}):(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:h.map(e=>{var r;let{date:l,time:i}=(e=>{let r=new Date(e);return{date:r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}})(e.scheduledTime),o=(e=>{if(!(null==t?void 0:t.user))return"";if("CUTTHROAT"===e.league.gameType){let r=[e.player1.name,e.player2.name];return e.player3&&r.push(e.player3.name),r.filter(e=>e!==t.user.name).join(" vs ")}return e.player1.id===t.user.id?e.player2.name:e.player1.name})(e),c=(e=>{let r=new Date,t=new Date(e.scheduledTime);return"COMPLETED"===e.status?{label:"Completed",color:"bg-green-100 text-green-800"}:"CANCELLED"===e.status?{label:"Cancelled",color:"bg-red-100 text-red-800"}:e.games&&e.games.length>0?e.player1Confirmed&&e.player2Confirmed?{label:"Score Confirmed",color:"bg-green-100 text-green-800"}:{label:"Score Pending",color:"bg-yellow-100 text-yellow-800"}:r>t?{label:"Awaiting Score",color:"bg-orange-100 text-orange-800"}:{label:"Scheduled",color:"bg-blue-100 text-blue-800"}})(e);return(0,n.jsxs)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",borderRadius:0,overflow:"hidden",display:"flex",flexDirection:"column",minHeight:"100%"},children:[(0,n.jsxs)("div",{style:{padding:"1.25rem",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:"0.75rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:600,color:"#111827"},children:l}),(0,n.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat(c.color),children:c.label})]}),(0,n.jsx)("p",{style:{fontSize:"1rem",color:"#374151",marginBottom:"0.5rem"},children:i}),(0,n.jsxs)("p",{style:{fontSize:"0.95rem",color:"#6b7280"},children:[e.league.name," • ",(0,d.q)(e.league.gameType),(null==(r=e.court)?void 0:r.name)?" • ".concat(e.court.name):""]})]}),(0,n.jsxs)("div",{style:{padding:"1.25rem",flexGrow:1,display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Opponent"}),(0,n.jsx)("p",{style:{fontSize:"1rem",fontWeight:500,color:"#111827"},children:o||"TBD"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Match Format"}),(0,n.jsxs)("p",{style:{fontSize:"0.95rem",color:"#374151"},children:["First to ",e.league.pointsToWin," ",e.league.winByTwo?"(Win by 2)":""]})]}),e.games&&e.games.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Reported Scores"}),(0,n.jsx)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:e.games.map(r=>(0,n.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",padding:"0.35rem 0.75rem",fontSize:"0.85rem",borderRadius:9999,backgroundColor:"#f3f4f6"},children:["Game ",r.gameNumber,":"," ",e.player1.id===(null==t?void 0:t.user.id)?"".concat(r.player1Score,"-").concat(r.player2Score):"".concat(r.player2Score,"-").concat(r.player1Score)]},r.gameNumber))})]})]}),(0,n.jsxs)("div",{style:{padding:"1.25rem",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,n.jsx)(s(),{href:"/matches/".concat(e.id),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.6rem 1rem",fontSize:"0.95rem",fontWeight:500,color:"white",backgroundColor:"#111827",textDecoration:"none",border:"none",cursor:"pointer"},children:"View Match Details"}),"authenticated"===a&&(null==t?void 0:t.user)&&(0,n.jsx)(n.Fragment,{children:h&&h.length>0&&(0,n.jsx)(n.Fragment,{children:e.games&&e.games.length>0?(0,n.jsx)(s(),{href:"/matches/".concat(e.id,"/confirm"),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.6rem 1rem",fontSize:"0.95rem",fontWeight:500,color:e.player1Confirmed&&e.player2Confirmed?"#6b7280":"#111827",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none",pointerEvents:e.player1Confirmed&&e.player2Confirmed?"none":"auto"},children:e.player1Confirmed&&e.player2Confirmed?"Scores Confirmed":"Confirm Scores"}):(0,n.jsx)(s(),{href:"/matches/".concat(e.id,"/report"),style:{display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0.6rem 1rem",fontSize:"0.95rem",fontWeight:500,color:"#111827",backgroundColor:"white",border:"1px solid #d1d5db",textDecoration:"none"},children:"Report Scores"})})})]})]},e.id)})})]})]})}},2180:(e,r,t)=>{Promise.resolve().then(t.bind(t,1970))},5016:(e,r,t)=>{"use strict";function n(e){switch(e){case"SINGLES":return"Singles";case"DOUBLES":return"Doubles";case"CUTTHROAT":return"Cut-Throat";default:return e}}t.d(r,{q:()=>n})}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=2180)),_N_E=e.O()}]);