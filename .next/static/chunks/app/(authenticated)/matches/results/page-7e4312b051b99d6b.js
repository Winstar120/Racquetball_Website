(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{63:(e,r,a)=>{"use strict";var t=a(7260);a.o(t,"redirect")&&a.d(r,{redirect:function(){return t.redirect}}),a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},5463:(e,r,a)=>{Promise.resolve().then(a.bind(a,9920))},9920:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var t=a(5155),l=a(2115),n=a(6489),s=a(63),o=a(2619),i=a.n(o);function d(){let{data:e,status:r}=(0,n.useSession)(),a=(0,s.useRouter)(),[o,d]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[u,p]=(0,l.useState)(!0),[h,y]=(0,l.useState)("all");(0,l.useEffect)(()=>{"unauthenticated"===r&&a.push("/login")},[r,a]),(0,l.useEffect)(()=>{e&&g()},[e,h]);let g=async()=>{try{var e;let r=new URLSearchParams;r.append("status","COMPLETED"),"all"!==h&&r.append("leagueId",h);let a=await fetch("/api/matches?".concat(r.toString()));if(!a.ok)throw Error("Failed to fetch matches");let t=await a.json();d(t.matches||[]);let l=new Map;null==(e=t.matches)||e.forEach(e=>{l.has(e.league.id)||l.set(e.league.id,e.league)}),m(Array.from(l.values()))}catch(e){console.error("Error fetching matches:",e)}finally{p(!1)}};return"loading"===r||u?(0,t.jsx)("div",{style:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("div",{style:{color:"white"},children:"Loading..."})}):(0,t.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)"},children:[(0,t.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,t.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"1.5rem 1rem"},children:[(0,t.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#111827",fontFamily:"var(--font-playfair), Georgia, serif"},children:"Match Results"}),(0,t.jsx)("p",{style:{marginTop:"0.25rem",color:"#6b7280",fontSize:"0.875rem"},children:"View completed matches and scores"})]})}),(0,t.jsxs)("div",{style:{maxWidth:"80rem",margin:"0 auto",padding:"2rem 1rem"},children:[c.length>0&&(0,t.jsx)("div",{style:{marginBottom:"1.5rem"},children:(0,t.jsxs)("select",{value:h,onChange:e=>y(e.target.value),style:{padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"white",cursor:"pointer",minWidth:"200px"},children:[(0,t.jsx)("option",{value:"all",children:"All Leagues"}),c.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})}),0===o.length?(0,t.jsx)("div",{style:{backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"2rem",textAlign:"center"},children:(0,t.jsx)("p",{style:{color:"#6b7280"},children:"No completed matches found."})}):(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map(e=>{let r=(e=>{if(!e.games||0===e.games.length)return null;let r=0,a=0,t=0;if(e.games.forEach(l=>{let n=[{player:"player1",name:e.player1.name,score:l.player1Score},{player:"player2",name:e.player2.name,score:l.player2Score}];"CUTTHROAT"===e.league.gameType&&void 0!==l.player3Score&&e.player3&&n.push({player:"player3",name:e.player3.name,score:l.player3Score});let s=n.reduce((e,r)=>r.score>e.score?r:e);"player1"===s.player?r++:"player2"===s.player?a++:"player3"===s.player&&t++}),"CUTTHROAT"===e.league.gameType){if(r>=2)return e.player1.name;if(a>=2)return e.player2.name;if(t>=2&&e.player3)return e.player3.name}else{if(r>=2)return e.player1.name;if(a>=2)return e.player2.name}return null})(e);return(0,t.jsxs)(i(),{href:"/matches/".concat(e.id),style:{display:"block",backgroundColor:"white",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",padding:"1.5rem",borderRadius:"0.5rem",textDecoration:"none",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)",e.currentTarget.style.transform="translateY(0)"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.25rem"},children:[e.league.name," - ",(e=>{switch(e){case"SINGLES":return"Singles";case"DOUBLES":return"Doubles";case"CUTTHROAT":return"Cut-Throat";default:return e}})(e.league.gameType)]}),(0,t.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:[new Date(e.scheduledTime).toLocaleDateString()," • Week ",e.weekNumber]})]}),r&&(0,t.jsxs)("div",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#f0fdf4",color:"#166534",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"600"},children:["Winner: ",r]})]}),(0,t.jsxs)("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:(0,t.jsxs)("div",{style:{fontWeight:"500",color:"#374151"},children:[e.player1.name," vs ",e.player2.name,e.player3&&(0,t.jsx)("span",{children:"CUTTHROAT"===e.league.gameType?" vs ".concat(e.player3.name):e.player4?" • ".concat(e.player3.name," & ").concat(e.player4.name):""})]})}),e.games.length>0&&(0,t.jsx)("div",{style:{display:"flex",gap:"1rem",marginTop:"0.5rem"},children:e.games.map(r=>(0,t.jsxs)("div",{style:{padding:"0.5rem",backgroundColor:"#f9fafb",borderRadius:"0.25rem",fontSize:"0.875rem"},children:[(0,t.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:["Game ",r.gameNumber]}),(0,t.jsxs)("div",{style:{fontWeight:"500",color:"#111827"},children:[r.player1Score,"-",r.player2Score,"CUTTHROAT"===e.league.gameType&&void 0!==r.player3Score&&(0,t.jsxs)("span",{children:["-",r.player3Score]})]})]},r.id))})]})]},e.id)})})]})]})}}},e=>{e.O(0,[2619,6489,8441,1255,7358],()=>e(e.s=5463)),_N_E=e.O()}]);